Ajax, REST 메모
(Asynchronous Javascript And XML)

예전 - 서버사이드 렌더링 > 데이터도 주고 화면도 같이 그려주는방식으로 개발했음

요즘 - 앞/뒷단을 나누어서 작업함
스프링 백엔드 레스트서버<----> 리액트화면 or Vue.js 화면 ..
                        <----> 앱을 화면상으로 사용하고 데이터를 받아오는 형식
                        <----> 복합으로 기존 컨트롤러에 화면도 같이그려주고 데이터만 단독 전달도 가능 (이방식 사용예정)
중간데이터를(JSON) 문자열 형태로 전달함
왜? >> 문자열은 서로간에 종속되지 않기 때문에, 호환이 잘된다.

기존의 자바스크립트의 객체 형식과 비슷한 구조. { 키 : 값 } 의 구조


-- REST방식
화면에서 요청 --> 스프링(레스트) 서버 > 데이터만 전달
깜박거림이 없다 : 새로고침을 하면 네트워크가 조금느릴때 그려지는 부분이 보인다(네이트) - 에어비앤비랑 비교해보기


준비물 : 포스트맨, 스웨거UI 설정
기존의 브라우저에서 get, post 전달 도구 이용하기

이전방식
>/board/modify - 수정, <form> 태그에서 데이터 묶음, 전달

REST표현
>/board/123 - 게시물 자체 , Ajax방식으로 데이터 전달 - GET, POST, PUT, PATCH 등 이용해서 CRUD 할 예정

514P
REST방식의 URL설계

520P REST 방식 댓글처리하는 API명세서
/replies (post) > 댓글 추가 >> 반환타입 : 추가한 댓글의 번호
/replies/list/:bno (get) > 게시물(bno)의 댓글 목록 >> 반환타입 : PageResponseDTO를 JSON으로 처리
/replies/:rno (put) > 특정한 번호의 댓글 수정 >> 반환타입 : 수정된 댓글 번호
/replies/:rno (delete) > 특정한 번호의 댓글 삭제 >> 반환타입 : 삭제한 댓글 번호
/replies/:rno (get) > 특정한 번호의 댓글 조회 >> 반환타입 : 댓글 객체를 JSON으로 변환한 문자열


530P 다대일 연관관계 연습
데이터베이스 입장에서 PK, FK , 1(PK로) : N(FK설정)
엔티티클래스 ORM > JPA > 영속성 컨텍스트(중간 캐시테이블) 안에서 작업함
entity > 게시글등록 > 영속성 컨텍스트 임시테이블 만들어서 실제테이블과 동기화 함

JPA 연관관게 설정 기준
1) 변화가 많은쪽 (회원1 - 게시글n개) >> 회원을 기준으로 작성하면 비정상적인 시스템이 설계된다
2) ERD(엔티티 관계 다이어그램)의 FK
- 단방향 / 양방향 >> java로만 관계형성을 해서, 기존 데이터베이스의 참조형식과 다르다
- 회원 - 게시글 >> 자바에서는 한방향으로 참조하거나, 양방향으로도 참조가 가능함
 : 회원이 작성한 게시글을 조회가능. 반대로 게시글에서 작성한 유저도 조회가능


스프링 부트 JPA
repository -> service -> controller -> 화면으로 표시 (역방향)
화면표시 > controller > service > repository > DB (정방향)